<%= render 'goats/components/carousel' %>

<div class="container mt-3">

  <h2><strong><%= @goat.user.name.capitalize %>'s Herd</strong></h2>

  <p>Description: <%= @goat.description %></p>
  <p>Number of goats: <%= @goat.number %></p>
  <p>Location: <%= @goat.location %></p>
  <p>Daily price: <%= @goat.price %> €</p>

  <div>
    <%= link_to 'edit your herd', edit_goat_path(@goat), class: 'btn btn-secondary my-3 mr-3' %>
    <%= link_to 'delete your herd', goat_path(@goat), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger my-3' %>
  </div>

  <!-- Button trigger modal -->
  <button type="button" class="btn btn-primary w-100" data-toggle="modal" data-target="#book-modal">
    Book this herd
  </button>

  <!-- Modal -->
  <div class="modal fade" id="book-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Book <strong><%= @goat.user.name.capitalize%></strong>'s herd</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <!-- form -->
        <div class="modal-body">
          <%= simple_form_for [@goat, @reservation] do |f| %>
            <%= f.input :location %>
            <%= f.input :start_date %>
            <%= f.input :end_date %>
        </div>
          <div class="modal-footer">
            <!-- close -->
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <!-- create reservation -->
            <%= f.submit "Book now", class: "btn btn-primary" %>
          <% end %>
        </div>

      </div>
    </div>
  </div>

  <div class="reviews my-4">
    <h5>Reviews:</h5>
    <% @goat.reviews.each do |review| %>
    <p><%=  '🐐' * review.rating%> | <%= review.comment %>.</p>
  <% end %>
  </div>

  <div class="mt-4">
    <h5>Add your review:</h5>
    <%= simple_form_for [@goat, @review] do |f| %>
    <%= f.input :comment %>
    <%= f.input :rating %>
    <%= f.submit "Review", class: "btn btn-secondary" %>
    <% end %>
  </div>

</div>
